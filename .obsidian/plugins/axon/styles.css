/* Axon 插件样式 - GitHub Primer Design System */

/* ==========================================================================
   GitHub Color System (Primer Design Tokens)
   ========================================================================== */

:root {
    /* Light mode colors - GitHub style */
    --color-fg-default: #24292f;
    --color-fg-muted: #57606a;
    --color-fg-subtle: #656d76;
    --color-fg-on-emphasis: #ffffff;

    --color-canvas-default: #ffffff;
    --color-canvas-overlay: #ffffff;
    --color-canvas-subtle: #f6f8fa;
    --color-canvas-inset: #ffffff;

    --color-border-default: #d0d7de;
    --color-border-muted: #d8dee4;
    --color-neutral-muted: #656d76;

    --color-accent-fg: #0969da;
    --color-accent-emphasis: #1f6feb;
    --color-accent-muted: #dbe9ff;
    --color-accent-subtle: #eaeef2;

    --color-success-fg: #1a7f37;
    --color-success-emphasis: #1f883d;
    --color-success-muted: #dafbe1;
    --color-success-subtle: #eaeef2;

    --color-danger-fg: #cf222e;
    --color-danger-emphasis: #cf222e;
    --color-danger-muted: #ffebe9;
    --color-danger-subtle: #ffebe9;

    --color-attention-fg: #9a6700;
    --color-attention-emphasis: #bf8700;
    --color-attention-muted: #fff8c5;
    --color-attention-subtle: #fff8c5;

    --color-shadow-small: 0 1px 0 0 rgba(31, 35, 40, 0.04);
    --color-shadow-medium: 0 3px 6px 1px rgba(31, 35, 40, 0.15);
    --color-shadow-large: 0 8px 24px 2px rgba(31, 35, 40, 0.15);

    --color-neutral-emphasis: #656d76;
    --color-neutral-strong: #24292f;

    /* Typography - GitHub font stack */
    --font-stack-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
    --font-stack-mono: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;

    --font-size-0: 12px;
    --font-size-1: 14px;
    --font-size-2: 16px;
    --font-size-3: 20px;

    --font-weight-normal: 400;
    --font-weight-semibold: 600;

    --border-radius: 6px;
    --border-radius-large: 8px;

    --spacing-1: 4px;
    --spacing-2: 8px;
    --spacing-3: 12px;
    --spacing-4: 16px;
    --spacing-5: 20px;
    --spacing-6: 24px;
}

/* Dark mode colors - GitHub style */
body.theme-dark {
    --color-fg-default: #e6edf3;
    --color-fg-muted: #8b949e;
    --color-fg-subtle: #8b949e;
    --color-fg-on-emphasis: #ffffff;

    --color-canvas-default: #0d1117;
    --color-canvas-overlay: #161b22;
    --color-canvas-subtle: #161b22;
    --color-canvas-inset: #0d1117;

    --color-border-default: #30363d;
    --color-border-muted: #21262d;
    --color-neutral-muted: #656d76;

    --color-accent-fg: #2f81f7;
    --color-accent-emphasis: #1f6feb;
    --color-accent-muted: #1c2128;
    --color-accent-subtle: #1c2128;

    --color-success-fg: #3fb950;
    --color-success-emphasis: #238636;
    --color-success-muted: #1c2128;
    --color-success-subtle: #1c2128;

    --color-danger-fg: #f85149;
    --color-danger-emphasis: #da3633;
    --color-danger-muted: #1c2128;
    --color-danger-subtle: #1c2128;

    --color-attention-fg: #d29922;
    --color-attention-emphasis: #9e6a03;
    --color-attention-muted: #1c2128;
    --color-attention-subtle: #1c2128;

    --color-shadow-small: 0 1px 0 0 rgba(1, 4, 9, 0.5);
    --color-shadow-medium: 0 3px 6px 1px rgba(1, 4, 9, 0.5);
    --color-shadow-large: 0 8px 24px 2px rgba(1, 4, 9, 0.5);

    --color-neutral-emphasis: #656d76;
    --color-neutral-strong: #e6edf3;
}

/* ==========================================================================
   Main Container
   ========================================================================== */

.axon-view-container {
    height: 100%;
    display: flex;
    flex-direction: column;
    background-color: var(--color-canvas-default);
    font-family: var(--font-stack-sans);
    color: var(--color-fg-default);
}

.axon-main-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    gap: var(--spacing-4);
    padding: var(--spacing-4);
}

/* ==========================================================================
   Header - GitHub Issue Header Style
   ========================================================================== */

.axon-console-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-3) var(--spacing-4);
    border: 1px solid var(--color-border-default);
    border-radius: var(--border-radius-large);
    background-color: var(--color-canvas-subtle);
}

.axon-console-title {
    margin: 0;
    font-size: var(--font-size-1);
    font-weight: var(--font-weight-semibold);
    color: var(--color-fg-default);
}

.axon-clear-button {
    padding: var(--spacing-1) var(--spacing-2);
    font-size: var(--font-size-0);
    font-weight: var(--font-weight-normal);
    border: 1px solid var(--color-border-default);
    border-radius: var(--border-radius);
    background-color: var(--color-canvas-default);
    color: var(--color-fg-muted);
    cursor: pointer;
    transition: all 0.2s ease-in-out;
}

.axon-clear-button:hover {
    background-color: var(--color-canvas-inset);
    border-color: var(--color-border-default);
    color: var(--color-fg-default);
}

/* ==========================================================================
   Messages Container - GitHub Issue Discussion Style
   ========================================================================== */

.axon-console-output {
    flex: 1;
    display: flex;
    flex-direction: column;
    border: 1px solid var(--color-border-default);
    border-radius: var(--border-radius-large);
    background-color: var(--color-canvas-subtle);
    min-height: 300px;
    overflow: hidden;
}

.axon-messages-container {
    flex: 1;
    overflow-y: auto;
    padding: var(--spacing-4);
    background-color: var(--color-canvas-subtle);
}

/* ==========================================================================
   Messages - GitHub Comment/Issue Style
   ========================================================================== */

.axon-message {
    position: relative;
    margin-bottom: var(--spacing-4);
    border: 1px solid var(--color-border-default);
    border-radius: var(--border-radius);
    background-color: var(--color-canvas-default);
    padding: var(--spacing-3);
    box-shadow: var(--color-shadow-small);
}

/* Message header with avatar placeholder and metadata */
.axon-message-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    margin-bottom: var(--spacing-2);
}

.axon-message-type {
    font-size: var(--font-size-0);
    font-weight: var(--font-weight-semibold);
    color: var(--color-fg-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    flex-shrink: 0;
}

.axon-message-timestamp {
    font-size: var(--font-size-0);
    color: var(--color-fg-muted);
}

/* Message content */
.axon-message-content {
    font-size: var(--font-size-1);
    line-height: 1.5;
    color: var(--color-fg-default);
    font-family: var(--font-stack-sans);
}

/* Code blocks in messages - GitHub style */
.axon-message-content code {
    padding: var(--spacing-1) var(--spacing-2);
    background-color: var(--color-canvas-subtle);
    border: 1px solid var(--color-border-default);
    border-radius: var(--border-radius);
    font-family: var(--font-stack-mono);
    font-size: 85%;
    color: var(--color-fg-default);
}

.axon-message-content pre {
    padding: var(--spacing-3);
    background-color: var(--color-canvas-subtle);
    border: 1px solid var(--color-border-default);
    border-radius: var(--border-radius);
    overflow-x: auto;
    font-family: var(--font-stack-mono);
    font-size: 85%;
    line-height: 1.45;
}

.axon-message-content pre code {
    padding: 0;
    background: none;
    border: none;
    font-size: 100%;
}

.axon-message-content strong {
    font-weight: var(--font-weight-semibold);
    color: var(--color-fg-default);
}

/* Message type variations - GitHub style */
.axon-message-user {
    border-left: 3px solid var(--color-accent-emphasis);
    background-color: var(--color-accent-subtle);
}

.axon-message-assistant {
    border-left: 3px solid var(--color-success-emphasis);
    background-color: var(--color-success-muted);
}

.axon-message-system {
    border-left: 3px solid var(--color-attention-emphasis);
    background-color: var(--color-attention-muted);
}

.axon-message-error {
    border-left: 3px solid var(--color-danger-emphasis);
    background-color: var(--color-danger-muted);
}

/* ==========================================================================
   Input Panel - GitHub Comment Editor Style
   ========================================================================== */

.axon-input-panel {
    border: 1px solid var(--color-border-default);
    border-radius: var(--border-radius-large);
    background-color: var(--color-canvas-default);
    overflow: hidden;
    box-shadow: var(--color-shadow-small);
}

.axon-input-wrapper {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-3);
}

.axon-textarea {
    width: 100%;
    min-height: 100px;
    padding: var(--spacing-3);
    border: none;
    border-bottom: 1px solid var(--color-border-default);
    border-radius: 0;
    font-size: var(--font-size-1);
    font-family: var(--font-stack-sans);
    line-height: 1.5;
    resize: vertical;
    background-color: var(--color-canvas-default);
    color: var(--color-fg-default);
    transition: none;
}

.axon-textarea:focus {
    outline: none;
    border-bottom-color: var(--color-accent-emphasis);
    box-shadow: 0 0 0 3px var(--color-accent-muted);
}

.axon-textarea::placeholder {
    color: var(--color-fg-muted);
}

.axon-textarea:disabled {
    background-color: var(--color-canvas-subtle);
    color: var(--color-fg-muted);
    cursor: not-allowed;
}

/* Button container - GitHub comment editor style */
.axon-button-container {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-3);
    background-color: var(--color-canvas-subtle);
}

/* ==========================================================================
   Buttons - GitHub Button Style
   ========================================================================== */

/* Primary button - GitHub green style */
.axon-send-button {
    padding: var(--spacing-2) var(--spacing-4);
    font-size: var(--font-size-1);
    font-weight: var(--font-weight-semibold);
    border: 1px solid var(--color-success-emphasis);
    border-radius: var(--border-radius);
    background-color: var(--color-success-emphasis);
    color: var(--color-fg-on-emphasis);
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    font-family: var(--font-stack-sans);
}

.axon-send-button:hover:not(:disabled) {
    background-color: var(--color-success-fg);
    border-color: var(--color-success-fg);
    box-shadow: var(--color-shadow-medium);
}

.axon-send-button:active:not(:disabled) {
    box-shadow: var(--color-shadow-small);
    transform: translateY(1px);
}

.axon-send-button:disabled {
    background-color: var(--color-border-muted);
    border-color: var(--color-border-muted);
    color: var(--color-fg-muted);
    cursor: not-allowed;
    opacity: 0.7;
}

/* Secondary button - GitHub outline style for Analyze button */
.axon-analyze-button {
    padding: var(--spacing-2) var(--spacing-4);
    font-size: var(--font-size-1);
    font-weight: var(--font-weight-semibold);
    border: 1px solid var(--color-border-default);
    border-radius: var(--border-radius);
    background-color: var(--color-canvas-default);
    color: var(--color-fg-default);
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    font-family: var(--font-stack-sans);
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-1);
}

.axon-analyze-button:hover:not(:disabled) {
    background-color: var(--color-canvas-subtle);
    border-color: var(--color-border-default);
    box-shadow: var(--color-shadow-small);
}

.axon-analyze-button:active:not(:disabled) {
    box-shadow: var(--color-shadow-small);
    transform: translateY(1px);
}

.axon-analyze-button:disabled {
    background-color: var(--color-canvas-subtle);
    border-color: var(--color-border-muted);
    color: var(--color-fg-muted);
    cursor: not-allowed;
    opacity: 0.7;
}

/* Button order - Analyze button on the left, Send on the right */
.axon-button-container {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-3);
    background-color: var(--color-canvas-subtle);
}

.axon-analyze-button {
    order: 1;
}

.axon-send-button {
    order: 2;
}

/* ==========================================================================
   File Insight Card - GitHub Repo Overview Style
   ========================================================================== */

.axon-message-analysis {
    border-left: 3px solid var(--color-accent-emphasis);
    background-color: var(--color-accent-subtle);
    padding: 0;
}

.axon-file-insight-card {
    width: 100%;
    border-radius: var(--border-radius);
    overflow: hidden;
    background-color: var(--color-canvas-default);
    border: 1px solid var(--color-border-default);
    box-shadow: var(--color-shadow-small);
}

.axon-file-header {
    padding: var(--spacing-4);
    border-bottom: 1px solid var(--color-border-default);
    background-color: var(--color-canvas-subtle);
}

.axon-file-title {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    font-size: var(--font-size-2);
    font-weight: var(--font-weight-semibold);
    color: var(--color-fg-default);
}

.axon-icon {
    flex-shrink: 0;
    color: var(--color-fg-muted);
}

.axon-file-body {
    padding: var(--spacing-4);
}

.axon-file-path {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    margin-bottom: var(--spacing-3);
    padding: var(--spacing-2);
    background-color: var(--color-canvas-subtle);
    border-radius: var(--border-radius);
}

.axon-path-text {
    font-size: var(--font-size-1);
    color: var(--color-fg-muted);
    font-family: var(--font-stack-mono);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.axon-file-stats {
    display: flex;
    gap: var(--spacing-4);
    margin-bottom: var(--spacing-3);
}

.axon-stat-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-2);
    background-color: var(--color-canvas-subtle);
    border-radius: var(--border-radius);
    flex: 1;
}

.axon-stat-item span {
    font-size: var(--font-size-1);
    color: var(--color-fg-default);
    font-weight: var(--font-weight-normal);
}

.axon-frontmatter-section {
    margin-top: var(--spacing-3);
}

.axon-section-title {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    margin-bottom: var(--spacing-3);
    font-size: var(--font-size-1);
    font-weight: var(--font-weight-semibold);
    color: var(--color-fg-default);
}

.axon-tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-2);
}

.axon-tag {
    display: inline-flex;
    align-items: center;
    padding: var(--spacing-1) var(--spacing-2);
    font-size: var(--font-size-0);
    font-weight: var(--font-weight-normal);
    border-radius: var(--border-radius);
    border: 1px solid transparent;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
}

/* GitHub-style label colors */
.axon-tag-blue {
    background-color: var(--color-accent-muted);
    color: var(--color-accent-fg);
    border-color: var(--color-accent-emphasis);
}

.axon-tag-green {
    background-color: var(--color-success-muted);
    color: var(--color-success-fg);
    border-color: var(--color-success-emphasis);
}

.axon-tag-yellow {
    background-color: var(--color-attention-muted);
    color: var(--color-attention-fg);
    border-color: var(--color-attention-emphasis);
}

.axon-tag-red {
    background-color: var(--color-danger-muted);
    color: var(--color-danger-fg);
    border-color: var(--color-danger-emphasis);
}

.axon-tag-gray {
    background-color: var(--color-canvas-subtle);
    color: var(--color-fg-muted);
    border-color: var(--color-border-default);
}

.axon-tag-date {
    background-color: var(--color-attention-muted);
    color: var(--color-attention-fg);
    border-color: var(--color-attention-emphasis);
}

.axon-tag:hover {
    opacity: 0.8;
    transform: translateY(-1px);
    box-shadow: var(--color-shadow-small);
}

.axon-file-footer {
    padding: var(--spacing-3) var(--spacing-4);
    border-top: 1px solid var(--color-border-default);
    background-color: var(--color-canvas-subtle);
    text-align: center;
}

.axon-footer-icon {
    font-size: var(--font-size-1);
    color: var(--color-fg-muted);
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-2);
}

/* Dark mode adjustments for tags */
body.theme-dark .axon-tag-blue {
    background-color: rgba(47, 129, 247, 0.2);
    color: #2f81f7;
}

body.theme-dark .axon-tag-green {
    background-color: rgba(63, 185, 80, 0.2);
    color: #3fb950;
}

body.theme-dark .axon-tag-yellow {
    background-color: rgba(210, 153, 34, 0.2);
    color: #d29922;
}

body.theme-dark .axon-tag-red {
    background-color: rgba(248, 81, 73, 0.2);
    color: #f85149;
}

/* ==========================================================================
   Scrollbars - GitHub style
   ========================================================================== */

.axon-messages-container::-webkit-scrollbar {
    width: 12px;
}

.axon-messages-container::-webkit-scrollbar-track {
    background: var(--color-canvas-subtle);
}

.axon-messages-container::-webkit-scrollbar-thumb {
    background: var(--color-border-default);
    border: 3px solid var(--color-canvas-subtle);
    border-radius: 6px;
}

.axon-messages-container::-webkit-scrollbar-thumb:hover {
    background: var(--color-neutral-muted);
}

/* ==========================================================================
   Utility Classes - GitHub style
   ========================================================================== */

.axon-message-content .issue-link {
    color: var(--color-accent-fg);
    text-decoration: none;
}

.axon-message-content .issue-link:hover {
    text-decoration: underline;
    color: var(--color-accent-emphasis);
}

/* ==========================================================================
   Responsive Design
   ========================================================================== */

@media (max-width: 768px) {
    .axon-main-container {
        padding: var(--spacing-3);
        gap: var(--spacing-3);
    }

    .axon-message {
        padding: var(--spacing-2);
    }

    .axon-textarea {
        min-height: 80px;
        font-size: 16px; /* Prevent zoom on iOS */
    }

    .axon-send-button {
        width: 100%;
        padding: var(--spacing-3);
    }
}

/* ==========================================================================
   Focus styles - GitHub accessibility
   ========================================================================== */

.axon-clear-button:focus-visible,
.axon-send-button:focus-visible {
    outline: 2px solid var(--color-accent-emphasis);
    outline-offset: 2px;
}

/* ==========================================================================
   Animation - GitHub subtle animations
   ========================================================================== */

.axon-message {
    animation: slideIn 0.2s ease-out;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ==========================================================================
   Loading states - GitHub skeleton style
   ========================================================================== */

.axon-message.loading {
    position: relative;
    overflow: hidden;
}

.axon-message.loading::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        90deg,
        transparent,
        var(--color-canvas-subtle),
        transparent
    );
    animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
    to {
        left: 100%;
    }
}


/* ==========================================================================
   Insight Card - New Analysis Card Style
   ========================================================================== */

.axon-insight-card {
    background-color: var(--color-canvas-default);
    border-radius: var(--border-radius);
    overflow: hidden;
    margin-top: var(--spacing-3);
}

.axon-insight-header {
    padding: var(--spacing-3);
    border-bottom: 1px solid var(--color-border-default);
    background-color: var(--color-canvas-subtle);
}

.axon-insight-title-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    margin-bottom: var(--spacing-1);
}

.axon-insight-icon {
    font-size: var(--font-size-2);
}

.axon-insight-filename {
    font-size: var(--font-size-2);
    font-weight: var(--font-weight-semibold);
    color: var(--color-fg-default);
}

.axon-insight-empty-badge {
    padding: var(--spacing-1) var(--spacing-2);
    font-size: var(--font-size-0);
    background-color: var(--color-attention-muted);
    color: var(--color-attention-fg);
    border-radius: var(--border-radius);
    margin-left: var(--spacing-2);
}

.axon-insight-path {
    font-size: var(--font-size-0);
    color: var(--color-fg-muted);
    font-family: var(--font-stack-mono);
    margin-bottom: var(--spacing-1);
}

.axon-insight-modified {
    font-size: var(--font-size-0);
    color: var(--color-fg-subtle);
}

/* Stats Section */
.axon-insight-stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--spacing-2);
    padding: var(--spacing-3);
    border-bottom: 1px solid var(--color-border-default);
}

.axon-stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--spacing-2);
    background-color: var(--color-canvas-subtle);
    border-radius: var(--border-radius);
}

.axon-stat-icon {
    font-size: var(--font-size-2);
    margin-bottom: var(--spacing-1);
}

.axon-stat-label {
    font-size: var(--font-size-0);
    color: var(--color-fg-muted);
}

.axon-stat-value {
    font-size: var(--font-size-1);
    font-weight: var(--font-weight-semibold);
    color: var(--color-fg-default);
}

/* Links Section */
.axon-insight-links {
    padding: var(--spacing-3);
    border-bottom: 1px solid var(--color-border-default);
}

.axon-insight-section-title {
    font-size: var(--font-size-1);
    font-weight: var(--font-weight-semibold);
    color: var(--color-fg-default);
    margin-bottom: var(--spacing-2);
}

.axon-insight-links-content {
    display: flex;
    gap: var(--spacing-3);
}

.axon-link-group {
    display: flex;
    align-items: center;
    gap: var(--spacing-1);
}

.axon-link-type {
    font-size: var(--font-size-0);
    color: var(--color-fg-muted);
    padding: var(--spacing-1) var(--spacing-2);
    background-color: var(--color-canvas-subtle);
    border-radius: var(--border-radius);
}

/* Frontmatter Section */
.axon-insight-frontmatter {
    padding: var(--spacing-3);
    border-bottom: 1px solid var(--color-border-default);
}

.axon-insight-fm-content {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-2);
}

.axon-fm-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-1);
}

.axon-fm-label {
    font-size: var(--font-size-0);
    color: var(--color-fg-muted);
}

.axon-fm-value {
    font-size: var(--font-size-0);
    color: var(--color-fg-default);
}

.axon-fm-tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-1);
}

.axon-fm-tag {
    padding: var(--spacing-1) var(--spacing-2);
    font-size: var(--font-size-0);
    background-color: var(--color-accent-muted);
    color: var(--color-accent-fg);
    border-radius: var(--border-radius);
}

/* Headings Section */
.axon-insight-headings {
    padding: var(--spacing-3);
}

.axon-collapsible {
    cursor: pointer;
    user-select: none;
}

.axon-collapsible:hover {
    color: var(--color-accent-fg);
}

.axon-toggle-icon {
    font-size: var(--font-size-0);
    margin-right: var(--spacing-1);
}

.axon-insight-headings-content {
    margin-top: var(--spacing-2);
    max-height: 200px;
    overflow-y: auto;
    transition: max-height 0.3s ease-out;
}

.axon-insight-headings-content.axon-collapsed {
    max-height: 0;
    overflow: hidden;
}

.axon-heading-item {
    display: flex;
    align-items: center;
    padding: var(--spacing-1) 0;
    font-size: var(--font-size-0);
    color: var(--color-fg-default);
}

.axon-heading-marker {
    color: var(--color-fg-muted);
    font-family: var(--font-stack-mono);
    margin-right: var(--spacing-1);
}

.axon-heading-text {
    color: var(--color-fg-default);
}

/* Heading level indentation */
.axon-heading-level-1 { font-weight: var(--font-weight-semibold); }
.axon-heading-level-2 { font-weight: var(--font-weight-semibold); }
.axon-heading-level-3 { font-weight: var(--font-weight-normal); }
.axon-heading-level-4 { font-weight: var(--font-weight-normal); }
.axon-heading-level-5 { font-weight: var(--font-weight-normal); color: var(--color-fg-muted); }
.axon-heading-level-6 { font-weight: var(--font-weight-normal); color: var(--color-fg-muted); }

/* Responsive adjustments for Insight Card */
@media (max-width: 400px) {
    .axon-insight-stats {
        grid-template-columns: repeat(2, 1fr);
    }
}


/* ==========================================================================
   Settings Tab Styles
   ========================================================================== */

.axon-api-key-input {
    font-family: var(--font-stack-mono);
}

.axon-settings-status {
    padding: var(--spacing-3);
    background-color: var(--color-canvas-subtle);
    border-radius: var(--border-radius);
    margin-bottom: var(--spacing-4);
}

.axon-status-ok {
    color: var(--color-success-fg);
    margin: var(--spacing-1) 0;
}

.axon-status-warning {
    color: var(--color-attention-fg);
    margin: var(--spacing-1) 0;
}

.axon-status-info {
    color: var(--color-fg-muted);
    font-size: var(--font-size-0);
    margin: var(--spacing-1) 0;
}

.axon-settings-help {
    padding: var(--spacing-3);
    background-color: var(--color-canvas-subtle);
    border-radius: var(--border-radius);
}

.axon-settings-help p {
    margin: var(--spacing-1) 0;
    color: var(--color-fg-muted);
    font-size: var(--font-size-1);
}

.axon-settings-help a {
    color: var(--color-accent-fg);
    text-decoration: none;
    display: inline-block;
    margin-top: var(--spacing-2);
}

.axon-settings-help a:hover {
    text-decoration: underline;
}

/* ==========================================================================
   Actionable Card Styles
   ========================================================================== */

.axon-actionable-card {
    margin-top: var(--spacing-2);
}

.axon-ai-response-content {
    padding: var(--spacing-3);
    background-color: var(--color-canvas-default);
    border-radius: var(--border-radius);
    margin-bottom: var(--spacing-3);
    line-height: 1.6;
}

.axon-ai-response-content h2,
.axon-ai-response-content h3,
.axon-ai-response-content h4 {
    margin-top: var(--spacing-3);
    margin-bottom: var(--spacing-2);
    color: var(--color-fg-default);
}

.axon-ai-response-content p {
    margin: var(--spacing-2) 0;
}

.axon-ai-response-content ul,
.axon-ai-response-content ol {
    margin: var(--spacing-2) 0;
    padding-left: var(--spacing-4);
}

.axon-ai-response-content li {
    margin: var(--spacing-1) 0;
}

.axon-ai-response-content a {
    color: var(--color-accent-fg);
    text-decoration: none;
}

.axon-ai-response-content a:hover {
    text-decoration: underline;
}

/* Code blocks in AI response */
.axon-code-block {
    background-color: var(--color-canvas-subtle);
    border: 1px solid var(--color-border-default);
    border-radius: var(--border-radius);
    padding: var(--spacing-3);
    margin: var(--spacing-2) 0;
    overflow-x: auto;
    font-family: var(--font-stack-mono);
    font-size: 85%;
    line-height: 1.45;
}

.axon-code-block code {
    background: none;
    padding: 0;
    border: none;
}

.axon-inline-code {
    background-color: var(--color-canvas-subtle);
    border: 1px solid var(--color-border-default);
    border-radius: 3px;
    padding: 2px 6px;
    font-family: var(--font-stack-mono);
    font-size: 85%;
}

/* Action buttons */
.axon-action-buttons {
    display: flex;
    gap: var(--spacing-2);
    padding-top: var(--spacing-2);
    border-top: 1px solid var(--color-border-default);
}

.axon-action-btn {
    padding: var(--spacing-2) var(--spacing-3);
    font-size: var(--font-size-0);
    font-weight: var(--font-weight-semibold);
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    font-family: var(--font-stack-sans);
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-1);
}

.axon-action-append {
    background-color: var(--color-success-emphasis);
    border: 1px solid var(--color-success-emphasis);
    color: var(--color-fg-on-emphasis);
}

.axon-action-append:hover {
    background-color: var(--color-success-fg);
    border-color: var(--color-success-fg);
    box-shadow: var(--color-shadow-small);
}

.axon-action-save {
    background-color: var(--color-accent-emphasis);
    border: 1px solid var(--color-accent-emphasis);
    color: var(--color-fg-on-emphasis);
}

.axon-action-save:hover {
    background-color: var(--color-accent-fg);
    border-color: var(--color-accent-fg);
    box-shadow: var(--color-shadow-small);
}

.axon-action-btn:active {
    transform: translateY(1px);
}

/* ==========================================================================
   Loading State Styles
   ========================================================================== */

.axon-send-button.axon-loading {
    background-color: var(--color-neutral-muted);
    border-color: var(--color-neutral-muted);
    cursor: wait;
}

.axon-send-button.axon-loading:hover {
    background-color: var(--color-neutral-muted);
    border-color: var(--color-neutral-muted);
    box-shadow: none;
}

/* Pulse animation for loading */
@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

.axon-loading {
    animation: pulse 1.5s ease-in-out infinite;
}

/* ==========================================================================
   Dark Mode Adjustments for New Components
   ========================================================================== */

body.theme-dark .axon-ai-response-content {
    background-color: var(--color-canvas-overlay);
}

body.theme-dark .axon-code-block {
    background-color: #161b22;
    border-color: var(--color-border-default);
}

body.theme-dark .axon-inline-code {
    background-color: rgba(110, 118, 129, 0.4);
}


/* ==========================================================================
   Context Indicator Styles
   ========================================================================== */

.axon-indicator-container {
    padding: var(--spacing-2) var(--spacing-3);
    border-bottom: 1px solid var(--color-border-default);
}

.axon-context-indicator {
    display: flex;
    align-items: center;
    padding: var(--spacing-2) var(--spacing-3);
    border-radius: var(--border-radius);
    font-size: var(--font-size-0);
    font-weight: var(--font-weight-semibold);
    transition: all 0.2s ease-in-out;
}

.axon-context-text {
    display: flex;
    align-items: center;
    gap: var(--spacing-1);
}

/* Selection Mode - Highlighted */
.axon-context-selection {
    background-color: var(--color-accent-muted);
    color: var(--color-accent-fg);
    border: 1px solid var(--color-accent-emphasis);
}

/* Full Note Mode - Subtle */
.axon-context-fullnote {
    background-color: var(--color-canvas-subtle);
    color: var(--color-fg-muted);
    border: 1px solid var(--color-border-default);
}

/* No File Mode - Warning */
.axon-context-nofile {
    background-color: var(--color-attention-muted);
    color: var(--color-attention-fg);
    border: 1px solid var(--color-attention-emphasis);
}

/* ==========================================================================
   Replace Selection Button Styles
   ========================================================================== */

.axon-action-replace {
    background-color: var(--color-accent-emphasis);
    border: 1px solid var(--color-accent-emphasis);
    color: var(--color-fg-on-emphasis);
    font-weight: var(--font-weight-semibold);
}

.axon-action-replace:hover {
    background-color: var(--color-accent-fg);
    border-color: var(--color-accent-fg);
    box-shadow: var(--color-shadow-medium);
    transform: translateY(-1px);
}

.axon-action-replace:active {
    transform: translateY(0);
    box-shadow: var(--color-shadow-small);
}

/* Secondary Append Button (in selection mode) */
.axon-action-append-secondary {
    background-color: var(--color-canvas-default);
    border: 1px solid var(--color-border-default);
    color: var(--color-fg-default);
}

.axon-action-append-secondary:hover {
    background-color: var(--color-canvas-subtle);
    border-color: var(--color-border-default);
}

/* ==========================================================================
   Dark Mode Adjustments for Context Indicator
   ========================================================================== */

body.theme-dark .axon-context-selection {
    background-color: rgba(47, 129, 247, 0.15);
    border-color: var(--color-accent-emphasis);
}

body.theme-dark .axon-context-nofile {
    background-color: rgba(210, 153, 34, 0.15);
    border-color: var(--color-attention-emphasis);
}


/* ==========================================================================
   Tool Output Card Styles - MCP Agent Mode
   ========================================================================== */

.axon-tool-output {
    margin: var(--spacing-3) 0;
    border: 1px solid var(--color-border-default);
    border-radius: var(--border-radius);
    background-color: var(--color-canvas-subtle);
    overflow: hidden;
    font-family: var(--font-stack-mono);
    font-size: var(--font-size-0);
}

.axon-tool-output-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-2) var(--spacing-3);
    background-color: var(--color-canvas-inset);
    border-bottom: 1px solid var(--color-border-default);
}

.axon-tool-output-icon {
    font-size: var(--font-size-1);
}

.axon-tool-output-title {
    font-weight: var(--font-weight-semibold);
    color: var(--color-fg-default);
    flex: 1;
}

.axon-tool-output-time {
    font-size: var(--font-size-0);
    color: var(--color-fg-muted);
}

.axon-tool-output-params {
    padding: var(--spacing-2) var(--spacing-3);
    border-bottom: 1px solid var(--color-border-default);
}

.axon-tool-output-params strong {
    display: block;
    margin-bottom: var(--spacing-1);
    color: var(--color-fg-muted);
    font-size: var(--font-size-0);
}

.axon-tool-output-params pre {
    margin: 0;
    padding: var(--spacing-2);
    background-color: var(--color-canvas-default);
    border-radius: var(--border-radius);
    overflow-x: auto;
}

.axon-tool-output-params code {
    font-family: var(--font-stack-mono);
    font-size: var(--font-size-0);
    color: var(--color-fg-default);
}

.axon-tool-output-result {
    padding: var(--spacing-2) var(--spacing-3);
}

.axon-tool-output-status {
    margin-bottom: var(--spacing-2);
}

.axon-tool-status-success {
    color: var(--color-success-fg);
    font-weight: var(--font-weight-semibold);
}

.axon-tool-status-error {
    color: var(--color-danger-fg);
    font-weight: var(--font-weight-semibold);
}

.axon-tool-output-content {
    padding: var(--spacing-2);
    background-color: var(--color-canvas-default);
    border-radius: var(--border-radius);
    color: var(--color-fg-default);
    word-break: break-word;
}

.axon-tool-output-content pre {
    margin: 0;
    white-space: pre-wrap;
    word-break: break-word;
}

/* Loading state */
.axon-tool-output-loading {
    opacity: 0.8;
}

.axon-tool-output-spinner {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-2) var(--spacing-3);
    color: var(--color-fg-muted);
}

.axon-spinner {
    display: inline-block;
    width: 14px;
    height: 14px;
    border: 2px solid var(--color-border-default);
    border-top-color: var(--color-accent-emphasis);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* Success state */
.axon-tool-output-success {
    border-left: 3px solid var(--color-success-emphasis);
}

.axon-tool-output-success .axon-tool-output-header {
    background-color: var(--color-success-muted);
}

/* Error state */
.axon-tool-output-error {
    border-left: 3px solid var(--color-danger-emphasis);
}

.axon-tool-output-error .axon-tool-output-header {
    background-color: var(--color-danger-muted);
}

/* ==========================================================================
   Agent Mode Indicator
   ========================================================================== */

.axon-agent-mode-indicator {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-2) var(--spacing-3);
    background-color: var(--color-accent-muted);
    border: 1px solid var(--color-accent-emphasis);
    border-radius: var(--border-radius);
    margin-bottom: var(--spacing-2);
    font-size: var(--font-size-0);
    color: var(--color-accent-fg);
}

.axon-agent-mode-icon {
    font-size: var(--font-size-1);
}

.axon-agent-mode-text {
    font-weight: var(--font-weight-semibold);
}

/* Dark mode adjustments */
body.theme-dark .axon-tool-output {
    background-color: var(--color-canvas-overlay);
}

body.theme-dark .axon-tool-output-header {
    background-color: var(--color-canvas-subtle);
}

body.theme-dark .axon-tool-output-params pre,
body.theme-dark .axon-tool-output-content {
    background-color: var(--color-canvas-inset);
}
